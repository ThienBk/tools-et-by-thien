<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Value Separator — Lớn & Mượt (Liquid Glass)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root{
      --accent: 42 126 255; /* rgb for accent */
      --muted: #6b7280;
      --bg: #f3f4f6;
      --glass: rgba(255,255,255,0.08);
      --radius: 14px;
      --transition: 320ms cubic-bezier(.2,.9,.3,1);
      --ripple-color: rgba(255,255,255,0.85);
    }

    html,body{height:100%;}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#edf2ff 0%, var(--bg) 100%);
      display:flex;align-items:center;justify-content:center;padding:24px;
    }

    /* Card */
    .card{
      width:100%;max-width:1000px;background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.94));
      border-radius:var(--radius);box-shadow:0 10px 30px rgba(16,24,40,0.12);padding:28px;backdrop-filter: blur(6px);
      transition: transform var(--transition), box-shadow var(--transition);
    }
    .card:hover{ transform: translateY(-6px); box-shadow: 0 18px 40px rgba(16,24,40,0.16);} 

    h1{ font-weight:700; font-size:1.6rem; color: #0f172a; margin-bottom:6px; }
    label{ font-size:0.98rem; color: #0f172a; }

    /* Textareas and inputs: larger, smoother */
    textarea, input, select{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
      font-size:1rem; line-height:1.4; padding:14px 16px; border-radius:10px; border:1px solid rgba(15,23,42,0.08);
      background: linear-gradient(180deg, #fff, #fbfdff); box-shadow: inset 0 -1px 0 rgba(2,6,23,0.02);
      transition: box-shadow var(--transition), transform var(--transition), border-color var(--transition);
    }
    textarea:focus, input:focus, select:focus{ outline:none; box-shadow: 0 8px 28px rgba(var(--accent)/0.12); border-color: rgba(var(--accent)/0.85); transform: translateY(-2px);} 

    /* Larger input areas */
    #input-values{ min-height:220px; font-size:1.02rem; }
    #output{ min-height:340px; font-size:1.02rem; resize:vertical; }

    /* Buttons big & soft */
    .btn{
      display:inline-flex;align-items:center;gap:10px; padding:12px 18px;border-radius:12px;border:none;cursor:pointer;font-weight:600;
      transition: transform var(--transition), box-shadow var(--transition), background-color var(--transition);
    }
    .btn:active{ transform: translateY(1px) scale(0.998);} 
    .btn-prim{ background: linear-gradient(90deg, rgba(var(--accent)/1), rgba(58,123,255,1)); color:white; box-shadow: 0 8px 26px rgba(var(--accent)/0.15); }
    .btn-ghost{ background:var(--glass); color:#0f172a; }
    .btn-danger{ background: linear-gradient(90deg,#ff6b6b,#ff4d4d); color:white; }
    .btn-large{ padding:14px 20px; font-size:1rem; border-radius:12px; }

    /* Badge */
    .badge{ display:inline-grid; place-items:center; padding:6px 10px; border-radius:999px; font-size:0.85rem; color:white; background:#111827; min-width:54px; }

    /* Ripple - modern */
    .ripple-wrap{ position:relative; overflow:hidden; }
    .ripple{ position:absolute; border-radius:50%; transform: scale(0); opacity:0.95; pointer-events:none; animation:rippleAnim 700ms cubic-bezier(.2,.9,.3,1); }
    @keyframes rippleAnim{ to{ transform:scale(6); opacity:0; } }

    /* subtle pulse animation for copy feedback */
    @keyframes pulseScale{ 0%{ transform: scale(1);} 50%{ transform: scale(1.04);} 100%{ transform: scale(1);} }
    .pulse{ animation: pulseScale 420ms ease-in-out; }

    /* Fade-in for card content */
    .fade-in{ opacity:0; transform: translateY(8px); animation: fadeIn 420ms ease-out forwards; }
    @keyframes fadeIn{ to{ opacity:1; transform:none; } }

    /* Liquid glass button styles */
    .button-glass{
      position:relative;
      border-radius:14px;
      padding:12px 20px;
      color: #fff;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid rgba(255,255,255,0.18);
      box-shadow: 0 8px 24px rgba(2,6,23,0.08);
      backdrop-filter: blur(8px) saturate(120%);
      overflow:hidden;
      transition: transform 260ms cubic-bezier(.2,.9,.3,1), box-shadow 260ms;
    }
    .button-glass:hover{ transform: translateY(-3px); box-shadow: 0 14px 40px rgba(2,6,23,0.12); }

    /* liquid sheen layer */
    .button-glass::before{
      content: '';
      position:absolute;
      inset: -40% -40% -40% -40%;
      background: radial-gradient(circle at var(--x,50%) var(--y,50%), rgba(255,255,255,0.28), rgba(255,255,255,0.06) 20%, transparent 40%);
      transform: translate3d(0,0,0);
      transition: opacity 220ms ease, transform 800ms cubic-bezier(.2,.9,.3,1);
      opacity:0;
      pointer-events:none;
    }
    .button-glass:hover::before{ opacity:1; }

    /* liquid animated wave */
    .button-glass::after{
      content:'';
      position:absolute; left:-50%; top:60%; width:200%; height:120%; background: radial-gradient(1200px 400px at 30% 10%, rgba(255,255,255,0.06), transparent 30%);
      transform: translateX(var(--wave, -40%)) rotate(6deg);
      transition: transform 900ms cubic-bezier(.2,.9,.3,1);
      pointer-events:none;
    }
    .button-glass:hover::after{ transform: translateX(0) rotate(6deg); }

    /* responsive tweaks */
    @media (max-width:768px){ .card{ padding:18px;} #input-values{ min-height:160px;} #output{ min-height:220px;} h1{ font-size:1.25rem;} }
  </style>
</head>
<body>
  <div class="card fade-in" role="application" aria-label="Value Separator Tool">
    <h1>Value Separator Tool — Lớn & Mượt (Liquid Glass)</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Left -->
      <div class="space-y-4">
        <div>
          <div class="flex items-center justify-between mb-2">
            <label for="input-values">Input Values</label>
            <span id="line-count" class="badge hidden" aria-live="polite">0 lines</span>
          </div>
          <textarea id="input-values" placeholder="Nhập các giá trị, mỗi giá trị một dòng"></textarea>
        </div>

        <div class="grid grid-cols-1 gap-3">
          <div>
            <label for="separator" class="mb-1 block">Separator</label>
            <select id="separator" class="w-full">
              <option value="," selected>Comma ( , )</option>
              <option value=";">Semicolon ( ; )</option>
              <option value="|">Pipe ( | )</option>
              <option value=" ">Space ( )</option>
              <option value="\t">Tab (\t)</option>
              <option value="-">Hyphen ( - )</option>
              <option value="\n">New Line</option>
              <option value="custom">Custom</option>
            </select>
          </div>

          <div id="custom-separator-container" class="hidden">
            <input id="custom-separator" placeholder="Gõ ký tự phân cách tùy chỉnh" />
          </div>

          <div class="flex items-center gap-3">
            <input type="checkbox" id="numerical-order" class="h-5 w-5" />
            <label for="numerical-order">Sắp theo thứ tự số (nếu là số)</label>
            <a style="margin-left:auto; color:#0f172a; font-weight:600; text-decoration:underline;" href="index.html">Home</a>
          </div>
        </div>
      </div>

      <!-- Right -->
      <div class="space-y-4">
        <div>
          <div class="flex items-center justify-between mb-2">
            <label for="output">Result</label>
            <div class="flex items-center gap-3">
              <span id="value-count" class="badge hidden" aria-live="polite">0 values</span>
              <button id="btn-reverse" class="btn btn-ghost ripple-wrap" title="Reverse conversion" aria-label="Reverse conversion">
                <i class="fas fa-exchange-alt"></i>
              </button>
            </div>
          </div>

          <div class="relative">
            <textarea id="output" readonly></textarea>
            <div style="position:absolute; right:10px; top:10px; display:flex; flex-direction:column; gap:8px;">
              <button id="btn-copy" class="btn btn-ghost btn-large ripple-wrap button-glass" title="Copy output" aria-label="Copy output"><i class="fas fa-copy"></i></button>
              <button id="btn-reverse-2" class="btn btn-ghost btn-large ripple-wrap" title="Reverse conversion"><i class="fas fa-exchange-alt"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-6 grid grid-cols-3 gap-3">
      <button id="btn-generate" class="btn btn-prim btn-large ripple-wrap">Generate</button>
      <button id="btn-copy-2" class="btn btn-ghost btn-large ripple-wrap button-glass"><i class="fas fa-copy"></i> Copy</button>
      <button id="btn-clear" class="btn btn-danger btn-large ripple-wrap"><i class="fas fa-trash"></i> Clear</button>
    </div>
  </div>

  <script>
    /* --- Utility: smooth ripple using requestAnimationFrame --- */
    function makeRipple(evt){
      const btn = evt.currentTarget;
      const rect = btn.getBoundingClientRect();
      const circle = document.createElement('span');
      const size = Math.max(rect.width, rect.height) * 1.2;
      const x = (evt.clientX || (rect.left + rect.width/2)) - rect.left - size/2;
      const y = (evt.clientY || (rect.top + rect.height/2)) - rect.top - size/2;
      circle.className = 'ripple';
      circle.style.width = circle.style.height = size + 'px';
      circle.style.left = x + 'px';
      circle.style.top = y + 'px';
      circle.style.background = getComputedStyle(document.documentElement).getPropertyValue('--ripple-color') || 'rgba(255,255,255,0.9)';
      btn.appendChild(circle);
      // Remove after animation
      circle.addEventListener('animationend', () => circle.remove());
    }

    document.querySelectorAll('.ripple-wrap').forEach(el => {
      el.addEventListener('pointerdown', makeRipple);
    });

    /* --- Elements --- */
    const inputArea = document.getElementById('input-values');
    const outputArea = document.getElementById('output');
    const separatorSelect = document.getElementById('separator');
    const customContainer = document.getElementById('custom-separator-container');
    const customInput = document.getElementById('custom-separator');
    const lineCount = document.getElementById('line-count');
    const valueCount = document.getElementById('value-count');
    const numericalOrderCheckbox = document.getElementById('numerical-order');

    /* Liquid glass interaction: follow pointer and subtle wave */
    function attachLiquidPointer(btn){
      if(!btn) return;
      btn.addEventListener('pointermove', e =>{
        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        btn.style.setProperty('--x', x + 'px');
        btn.style.setProperty('--y', y + 'px');
        // wave var to create slight movement on enter
        btn.style.setProperty('--wave', `${Math.max(-40, -20 - (rect.width - x)/8)}%`);
      });
      btn.addEventListener('pointerleave', ()=>{
        btn.style.setProperty('--x', '50%');
        btn.style.setProperty('--y', '50%');
        btn.style.setProperty('--wave', '-40%');
      });
    }

    // attach to glass buttons
    document.querySelectorAll('.button-glass').forEach(attachLiquidPointer);

    /* Update counts with smooth fade */
    function updateLineCount(){
      const lines = inputArea.value.split('\n').filter(l => l.trim() !== '');
      if(lines.length === 0){ lineCount.classList.add('hidden'); }
      else{ lineCount.classList.remove('hidden'); lineCount.textContent = `${lines.length} line${lines.length!==1?'s':''}`; }
    }
    inputArea.addEventListener('input', debounce(updateLineCount, 160));

    separatorSelect.addEventListener('change', () => {
      customContainer.classList.toggle('hidden', separatorSelect.value !== 'custom');
    });

    // Debounce helper
    function debounce(fn, wait){ let t; return (...args) => { clearTimeout(t); t = setTimeout(()=>fn(...args), wait); }; }

    /* Generate output (smooth, non-blocking) */
    async function generateOutput(e){
      if(e) makeRipple(e);
      // read values
      let rawLines = inputArea.value.split('\n').map(l=>l.trim()).filter(Boolean);

      // remove numeric prefixes like "1. " if present
      rawLines = rawLines.ma
